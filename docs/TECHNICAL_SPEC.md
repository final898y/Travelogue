# ğŸ› ï¸ Travelogue æŠ€è¡“è¦æ ¼èªªæ˜æ›¸

æœ¬æ–‡ä»¶ç´€éŒ„å°ˆæ¡ˆçš„æŠ€è¡“æ¶æ§‹ã€è³‡æ–™æµç¨‹èˆ‡é–‹ç™¼è¦ç¯„ï¼Œä¾›é–‹ç™¼è€…èˆ‡ AI Agent åƒè€ƒã€‚

---

## 1. è³‡æ–™å¤¾çµæ§‹ (Directory Structure)

```text
D:\Repos\Travelogue
â”œâ”€â”€ docs/               # å°ˆæ¡ˆæ–‡æª”
â”œâ”€â”€ public/             # éœæ…‹è³‡æº (Logo, Favicon)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/         # å“ç‰Œè³‡æºã€ä¸­å¤®åœ–ç¤ºåº« (icons.ts)
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ trip/       # æ¥­å‹™é‚è¼¯çµ„ä»¶ (Form, Card, Item)
â”‚   â”‚   â””â”€â”€ ui/         # é€šç”¨åŸºç¤ UI (Toast, BottomSheet, Dialog)
â”‚   â”œâ”€â”€ composables/    # å…±äº«æ¥­å‹™é‚è¼¯ (useTripDetails)
â”‚   â”œâ”€â”€ router/         # Vue Router é…ç½® (History Mode)
â”‚   â”œâ”€â”€ services/       # Firebase SDK åˆå§‹åŒ–ã€ç¨®å­è³‡æ–™
â”‚   â”œâ”€â”€ stores/         # Pinia ç‹€æ…‹ç®¡ç† (auth, trip, plan, expense, ui)
â”‚   â”œâ”€â”€ types/          # Zod Schema èˆ‡ TypeScript å‹åˆ¥å®šç¾©
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½å¼ (mapUtils)
â”‚   â””â”€â”€ views/          # é é¢ç´šè¦–åœ–
â””â”€â”€ tests/              # Vitest å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦
```

---

## 2. ç‹€æ…‹ç®¡ç†è¨­è¨ˆ (Pinia Stores)

å°ˆæ¡ˆæ¡ç”¨è·è²¬åˆ†é›¢çš„ Store è¨­è¨ˆï¼š

-   **`authStore.ts`**: ç®¡ç† Firebase Auth ç‹€æ…‹èˆ‡ä½¿ç”¨è€…ç™½åå–®é©—è­‰ã€‚
-   **`tripStore.ts`**: æ—…ç¨‹æ¸…å–® (CRUD) èˆ‡ä¸»æ–‡ä»¶æ¬„ä½ï¼ˆæˆå“¡ã€é è¨‚ã€æº–å‚™æ¸…å–®ï¼‰ã€‚
-   **`planStore.ts`**: ç®¡ç†ã€Œè¡Œç¨‹æ´»å‹•ã€å­é›†åˆï¼Œæ”¯æ´å³æ™‚ç›£è½ (onSnapshot)ã€‚
-   **`expenseStore.ts`**: ç®¡ç†ã€Œè¨˜å¸³ç´€éŒ„ã€å­é›†åˆèˆ‡çµç®—é‚è¼¯ã€‚
-   **`collectionStore.ts`**: ç®¡ç†ã€Œè³‡æ–™æ”¶é›†ã€å­é›†åˆã€‚
-   **`uiStore.ts`**: **å…¨åŸŸäº¤äº’ç³»çµ±**ï¼Œç®¡ç† Toast èˆ‡ ConfirmDialog çš„é¡¯ç¤ºèˆ‡éåŒæ­¥ Promiseã€‚

---

## 3. è³‡æ–™æ¨¡å‹èˆ‡é©—è­‰ (Types & Zod)

-   **Zod åŸ·è¡ŒæœŸæ ¡é©—**: æ‰€æœ‰å¾ Firestore ç²å–çš„è³‡æ–™å¿…é ˆé€šé `src/types/trip.ts` å®šç¾©çš„ Zod Schema é©—è­‰ã€‚
-   **UI å‹åˆ¥åˆ†é›¢**: ç‚ºäº†è§£æ±º Vue SFC ç·¨è­¯å™¨é™åˆ¶ï¼Œç´” TypeScript ä»‹é¢å®šç¾©æ–¼ `src/types/trip-ui.ts`ã€‚
-   **ID ç¶å®šæ¨¡å¼**: æˆå“¡èˆ‡è¨˜å¸³å…¨é¢æ¡ç”¨ `id` (Email æˆ–ç”¢ç”Ÿçš„ UID) é€²è¡Œç¶å®šï¼Œé¿å…å› æ›´åå°è‡´è³‡æ–™æ–·é€£ã€‚

---

## 4. é—œéµæŠ€è¡“å¯¦ç¾

-   **å³æ™‚åŒæ­¥**: ä½¿ç”¨ Firestore `onSnapshot` å¯¦ç¾å¤šäºº/å¤šç«¯å³æ™‚è³‡æ–™åŒæ­¥ã€‚
-   **åˆ†åŒ…å„ªåŒ–**: æ–¼ `vite.config.ts` å¯¦ä½œ `manualChunks`ï¼Œå°‡å¤§å‹å¥—ä»¶ (Firebase, Zod) ç¨ç«‹æ‰“åŒ…ï¼Œ`index.js` é«”ç© < 50kBã€‚
-   **å–®å…ƒæ¸¬è©¦**: ä½¿ç”¨ Vitest + `@pinia/testing`ï¼Œæ ¸å¿ƒæ¥­å‹™è¡¨å–®æ¸¬è©¦è¦†è“‹ç‡é«˜ã€‚

---

## 5. æœªä¾†æ“´å±•åŠŸèƒ½ (Roadmap)

-   **è³‡æ–™ç®¡ç†ç³»çµ± (è¿‘æœŸç›®æ¨™)**:
    - [ ] å¯¦ä½œ `backupService.ts`ï¼šé›²ç«¯å‚™ä»½è‡³ `backups` é›†åˆã€‚
    - [ ] å¯¦ä½œ JSON å°å‡ºåŠŸèƒ½ï¼šæ‰“åŒ…å®Œæ•´æ—…ç¨‹è³‡æ–™ä¾›ä¸‹è¼‰ã€‚
    - [ ] å¯¦ä½œ JSON å°å…¥åŠŸèƒ½ï¼šå®Œæ•´è¦†è“‹æˆ–å¢é‡é‚„åŸè³‡æ–™ã€‚
-   **åœ°åœ–èˆ‡æ™ºæ…§åŠŸèƒ½**:
    - [ ] æ•´åˆ Google Maps JavaScript API å¯¦ä½œåœ°åœ–è¦–åœ–æ¨¡å¼ã€‚
    - [ ] å¯¦ä½œ OpenWeatherMap æ°£è±¡ API é€£å‹•ã€‚
-   **ç¤¾äº¤èˆ‡å…±äº«**:
    - [ ] å¯¦ä½œå–®ä¸€æ—…ç¨‹çš„å…±äº«é€£çµ (Shared URL)ã€‚
    - [ ] PWA é›¢ç·šæ”¯æ´èˆ‡é›¢ç·šå¿«å–å„ªåŒ–ã€‚
